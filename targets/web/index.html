<!DOCTYPE html>
<html lang="en">
<head>
<link rel="icon" type="image/png" href="assets/logo.png" />
<style>
@font-face {
  font-family: likeraylib;
  src: url("assets/likeraylib.ttf");
}

html, body {
  width:  100vw;
  height: 100vh;
  margin: 0;
}

body {
  background: #1a1c2c;
  color: #f4f4f4;
  font-family: likeraylib;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
}

#canvas {
  image-rendering: -moz-crisp-edges;
  image-rendering: -webkit-crisp-edges;
  image-rendering: pixelated;
  image-rendering: crisp-edges;
}

#canvas.portrait {
  height: 100vh;
  width: auto;
}
#canvas.landscape {
  width: 100vw;
  height: auto;
}

#title {
  text-align: center;
  width: 100vw;
}
</style>
</head>
<body>
  <div id="title">
  click to hear sound.
  </div>
  <div>
  <canvas width="320" height="240" id="canvas"></canvas>
  </div>
</body>
</html>

<!-- eventually I will package all of these better -->
<script src="./modplayer.js"></script>
<script id="drawImage-vertex-shader" type="x-shader/x-vertex">
attribute vec4 a_position;
attribute vec2 a_texcoord;

uniform mat4 u_matrix;

varying vec2 v_texcoord;

void main() {
   gl_Position = u_matrix * a_position;
   v_texcoord = a_texcoord;
}
</script>
<script id="drawImage-fragment-shader" type="x-shader/x-fragment">
precision mediump float;

varying vec2 v_texcoord;

uniform sampler2D u_texture;

void main() {
   gl_FragColor = texture2D(u_texture, v_texcoord);
}
</script>
<script src="https://webglfundamentals.org/webgl/resources/webgl-utils.js"></script>
<script src="https://webglfundamentals.org/webgl/resources/webgl-lessons-helper.js"></script>
<script src="https://webglfundamentals.org/webgl/resources/m4.js"></script>

<script type="module">
/* global WebAssembly, fetch */
import * as null0 from './null0-web.js'

WebAssembly.instantiateStreaming(fetch('build/debug.wasm'), {
  env: {
    ...null0,
    abort: () => {},
    'console.log': console.log
  }
}).then(({ instance: { exports } }) => null0.setup(exports, document.getElementById('canvas')))

window.addEventListener('click', () => {
  document.getElementById('title')?.remove()
}, { once: true })
</script>